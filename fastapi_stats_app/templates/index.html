<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–æ—Ç–∞</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>


<body>
    <div class="container">
        <div class="theme-switcher" id="theme-toggle-button">–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É</div>
         <h1>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¢–µ–ª–µ–≥—Ä–∞–º –ë–æ—Ç–∞</h1>
         
        <div id="stats-data">
            <div class="stat-item" id="total-actions-item">
                <strong>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π:</strong> <span id="total-actions-value">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
            </div>
            <div id="last-updated-container" style="text-align: right; font-size: 0.9em; color: #666; margin-top: -5px; margin-bottom: 10px; display: none;">
                –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="last-updated-value">...</span>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ -->
            <div class="tab-container">
                <button class="tab-button active" onclick="openTab(event, 'popularActionsTab')">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</button>
                <button class="tab-button" onclick="openTab(event, 'typesTab')">–¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π</button>
                <button class="tab-button" onclick="openTab(event, 'activityTimeTab')">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏</button>
                <button class="tab-button" onclick="openTab(event, 'logTab')">–õ–æ–≥ –ë–æ—Ç–∞</button>
            </div>

            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫ -->
            <div id="popularActionsTab" class="tab-content" style="display: block;"> <!-- –ü–µ—Ä–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
                <div class="chart-wrapper">
                    <h2>
                        –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                        <div id="popular-actions-filter" style="display: inline-block; margin-left: 20px; font-size: 14px; font-weight: normal;">
                            <label><input type="radio" name="actionFilter" value="all" checked> –í—Å–µ</label>
                            <label style="margin-left: 10px;"><input type="radio" name="actionFilter" value="commands"> –ö–æ–º–∞–Ω–¥—ã</label>
                            <label style="margin-left: 10px;"><input type="radio" name="actionFilter" value="messages"> –°–æ–æ–±—â–µ–Ω–∏—è</label>
                        </div>
                        <button class="download-csv-btn" data-chart="popularActions" style="display: none;">üíæ CSV</button>
                    </h2>
                    <canvas id="popularActionsChart"></canvas>
                    <p id="popular-actions-status" style="text-align:center;"></p>
                </div>
            </div>

            <div id="typesTab" class="tab-content">
                <div class="chart-wrapper" style="min-width: 300px; max-width: 500px; margin: 20px auto;"> <!-- –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫—Ä—É–≥–æ–≤—É—é –¥–∏–∞–≥—Ä–∞–º–º—É -->
                    <h2>–¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π <button class="download-csv-btn" data-chart="actionTypes" style="display: none;">üíæ CSV</button></h2>
                    <canvas id="actionTypesChart" style="height: 400px;"></canvas>
                    <p id="action-types-status" style="text-align:center;"></p>
                </div>
            </div>

            <div id="activityTimeTab" class="tab-content">
                <div class="chart-wrapper">
                    <h2>
                        –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏
                        <div id="activity-time-filter" style="display: inline-block; margin-left: 20px; font-size: 14px; font-weight: normal;">
                            <label><input type="radio" name="timeFilter" value="day" checked> –ü–æ –¥–Ω—è–º</label>
                            <label style="margin-left: 10px;"><input type="radio" name="timeFilter" value="week"> –ü–æ –Ω–µ–¥–µ–ª—è–º</label>
                            <label style="margin-left: 10px;"><input type="radio" name="timeFilter" value="month"> –ü–æ –º–µ—Å—è—Ü–∞–º</label>
                        </div>
                        <button class="download-csv-btn" data-chart="activityOverTime" style="display: none;">üíæ CSV</button>
                    </h2>
                    <canvas id="activityOverTimeChart"></canvas>
                    <p id="activity-over-time-status" style="text-align:center;"></p>
                </div>
            </div>

            <div id="logTab" class="tab-content">
                <h2>–õ–æ–≥ –ë–æ—Ç–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)</h2>
                <pre id="bot-log-content">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª–æ–≥—É...</pre>
                <p id="bot-log-status" style="text-align:center;"></p>
            </div>


            <!-- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ —Ç–µ–ø–µ—Ä—å –Ω–∏–∂–µ -->
            <h2 style="margin-top: 60px;">–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h2>
            <table id="leaderboard-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th style="border-right: none;">–ê–≤–∞—Ç–∞—Ä</th>
                        <th style="border-left: none; ">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–ü–æ–ª–Ω–æ–µ –∏–º—è)</th>
                        <th>–¢—ç–≥ –¢–µ–ª–µ–≥—Ä–∞–º</th>
                        <th>–ö–æ–ª-–≤–æ –¥–µ–π—Å—Ç–≤–∏–π</th>
                        <th>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body">
                    <!-- Skeleton Loader for Leaderboard -->
                    <tr class="skeleton-row">
                        <td><div class="skeleton skeleton-text" style="width: 20px; height: 20px; margin: auto;"></div></td>
                        <td><div class="skeleton skeleton-avatar" style="width: 60px; height: 60px; margin: auto;"></div></td>
                        <td><div class="skeleton skeleton-text" style="width: 80%;"></div></td>
                        <td><div class="skeleton skeleton-text" style="width: 70%;"></div></td>
                        <td><div class="skeleton skeleton-text" style="width: 50%;"></div></td>
                        <td><div class="skeleton skeleton-text" style="width: 90%;"></div></td>
                    </tr>
                    <tr class="skeleton-row"><td><div class="skeleton skeleton-text" style="width: 20px; height: 20px; margin: auto;"></div></td><td><div class="skeleton skeleton-avatar" style="width: 60px; height: 60px; margin: auto;"></div></td><td><div class="skeleton skeleton-text" style="width: 75%;"></div></td><td><div class="skeleton skeleton-text" style="width: 65%;"></div></td><td><div class="skeleton skeleton-text" style="width: 45%;"></div></td><td><div class="skeleton skeleton-text" style="width: 85%;"></div></td></tr>
                    <tr class="skeleton-row"><td><div class="skeleton skeleton-text" style="width: 20px; height: 20px; margin: auto;"></div></td><td><div class="skeleton skeleton-avatar" style="width: 60px; height: 60px; margin: auto;"></div></td><td><div class="skeleton skeleton-text" style="width: 82%;"></div></td><td><div class="skeleton skeleton-text" style="width: 72%;"></div></td><td><div class="skeleton skeleton-text" style="width: 52%;"></div></td><td><div class="skeleton skeleton-text" style="width: 88%;"></div></td></tr>
                    <tr class="skeleton-row"><td><div class="skeleton skeleton-text" style="width: 20px; height: 20px; margin: auto;"></div></td><td><div class="skeleton skeleton-avatar" style="width: 60px; height: 60px; margin: auto;"></div></td><td><div class="skeleton skeleton-text" style="width: 78%;"></div></td><td><div class="skeleton skeleton-text" style="width: 68%;"></div></td><td><div class="skeleton skeleton-text" style="width: 48%;"></div></td><td><div class="skeleton skeleton-text" style="width: 87%;"></div></td></tr>
                </tbody>
            </table>
         </div>
     </div>
 
    <button id="back-to-top-btn" title="–ù–∞–≤–µ—Ä—Ö">‚ñ≤</button>

    <!-- Modal for showing users -->
    <div id="user-list-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close-btn">&times;</span>
            <h3 id="modal-title">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –≤—ã–ø–æ–ª–Ω–∏–≤—à–∏–µ –¥–µ–π—Å—Ç–≤–∏–µ</h3>
            <div id="modal-body">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="modal-footer" style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
                <div id="modal-pagination-controls" class="pagination-container"></div>
                <button id="modal-download-csv-btn" class="download-csv-btn" style="display: none;">üíæ –°–∫–∞—á–∞—Ç—å CSV</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static/js/theme.js"></script>
    <script src="/static/js/main.js"></script>
 </body>
 </html>
